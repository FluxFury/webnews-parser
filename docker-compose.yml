services:
  scrapyd:
    build:
      context: .
      dockerfile: ./src/Dockerfile
      ssh:
        - default
    container_name: scrapyd-ff-server
    ports:
      - "6800:6800"
    volumes:
      - ./src/scrapyd.conf:/etc/scrapyd/scrapyd.conf
    env_file:
      - .env
    restart: unless-stopped
    depends_on:
      - db
    networks:
        - app_network
  db:
    image: postgres:17
    container_name: ff-db
    env_file:
      - .env
    ports:
      - "5433:5432"
    restart: unless-stopped

    networks:
        - app_network

volumes:
  postgres-data:

networks:
  app_network:
    driver: bridge